#!/bin/bash


Green="\033[32m"
Font="\033[0m"
Red="\033[31m" 

# soft
sudo apt install -y git unzip tmux
# tor
if [ ! -d "/check/" ];then 
    sudo apt-get -y update && sudo apt-get -y upgrade;
    sudo mkdir -p /check/;    
    sudo sed -i 's/mouse=a/mouse-=a/g' /usr/share/vim/vim81/defaults.vim
    sudo apt-get install -y tor
	echo echo 'vm.swappiness=10' | sudo tee -a /etc/sysctl.conf
    echo "ExcludeNodes {cn},{hk},{mo},{kp},{ir},{sy},{pk},{cu},{vn}" | sudo tee -a /etc/tor/torrc
    echo "ExcludeExitNodes {cn},{hk},{mo},{kp},{ir},{sy},{pk},{cu},{vn}" | sudo tee -a /etc/tor/torrc
    echo "strictnodes 1" | sudo tee -a /etc/tor/torrc
    echo "MaxCircuitDirtiness 10" | sudo tee -a /etc/tor/torrc
    echo "HTTPTunnelPort 9080" | sudo tee -a /etc/tor/torrc
fi


# swap
# dd if=/dev/zero of=/var/swapfile bs=1M count=2048 && /sbin/mkswap /var/swapfile && /sbin/swapon /var/swapfile && chmod 0600 /var/swapfile && echo "/var/swapfile swap swap defaults 0 0" >>/etc/fstab

# ssh port
# sed -i 's/#Port 22/Port 9922/g'  /etc/ssh/sshd_config


# 找最新版本 https://www.torproject.org 
# 非root 用户下执行以下命令
echo -e "${Green} Confirm: https://www.torproject.org Default Version: tor-browser-linux64-10.5.10_en-US.tar ${Font}"
read -p "Input New Tor DownLoad Url:" torDownLoadUrl
torDownLoadUrl=${torDownLoadUrl:-"https://www.torproject.org/dist/torbrowser/10.5.10/tor-browser-linux64-10.5.10_en-US.tar.xz"}
torDir=~/torNet;
if [ ! -d "${torDir}" ]; then rm -rf "${torDir}";fi;mkdir -p "${torDir}" && cd "${torDir}" && wget -O tor.tar.xz ${torDownLoadUrl} && tar xf tor.tar.xz && cd tor-browser_en-US && ./start-tor-browser.desktop --register-app && mv ~/.local/share/applications/start-tor-browser.desktop ~/Desktop/



# 确认加载器版本最新版是否为4.0.3 https://github.com/AntSwordProject/AntSword-Loader
echo -e "${Green} Confirm: https://github.com/AntSwordProject/AntSword-Loader Default Version:4.0.3 ${Font}"
read -p "Input New antSword DownLoad Url:" AntSwordLoader
AntSwordLoader=${AntSwordLoader:-"https://github.com/AntSwordProject/AntSword-Loader/releases/download/4.0.3/AntSword-Loader-v4.0.3-linux-x64.zip"}
cd ~ && git clone https://github.com/AntSwordProject/antSword.git && wget "${AntSwordLoader}" && unzip AntSword-Loader-v4.0.3-linux-x64.zip
# 修改UA
sed -i 's#antSword/v2.1#Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)#g' ~/antSword/modules/request.js && sed -i 's#antSword/v2.1#Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)#g' ~/antSword/modules/update.js
echo '#!/bin/bash' >run_Ant && echo 'cd ~/AntSword-Loader-v4.0.3-linux-x64 && ./AntSword' >>run_Ant;chmod 755 run_Ant
sudo ln -sf `pwd`/run_Ant /usr/local/bin/run_Ant

echo -e "${Green} Select the directory containing app.js when initializing at startup ${Font}"
echo -e "${Green} Ant Sword agent configuration: ${Font}"
echo -e "${Green} Type: SOCKS5 ip: 127.0.0.1 Port: 9050 ${Font}"
echo -e "${Green} Or use tor's 9150, you must start the browser first to have this port ${Font}"
echo -e "${Green} Type: SOCKS5 ip: 127.0.0.1 Port: 9150 ${Font}"

# 下载JDK
cd ~;wget --no-check-certificate --no-cookies --header "Cookie: oraclelicense=accept-securebackup-cookie" http://download.oracle.com/otn-pub/java/jdk/8u131-b11/d54c1d3a095b4ff2b6607d096fa80163/jdk-8u131-linux-x64.tar.gz -O jdk-8u271-linux-x64.tar.gz
[ -f "jdk-8u271-linux-x64.tar.gz" ] && tar xf jdk-8u271-linux-x64.tar.gz && mv jdk1.8.0_131 jdk1.8.0_261

# 安装冰蝎
# Confirm https://github.com/rebeyond/Behinder
echo -e "${Green} Confirm: https://github.com/rebeyond/Behinder Default Version: Behinder_v3.0_Beta_11.t00ls ${Font}"
read -p "Input New Behinder DownLoad Url:" Behinder
Behinder=${Behinder:-"https://github.com/rebeyond/Behinder/releases/download/Behinder_v3.0_Beta_11/Behinder_v3.0_Beta_11.t00ls.zip"}
cd ~ && mkdir Behinder && cd Behinder && wget "${Behinder}" -O Behinder.zip && unzip Behinder.zip
echo '#!/bin/bash' >"run_Behinder" && echo 'cd ~/Behinder/ && ~/jdk1.8.0_261/bin/java -jar ./Behinder.jar' >>"run_Behinder" && chmod 755 run_Behinder
sudo ln -sf `pwd`/run_Behinder /usr/local/bin/run_Behinder

# 安装哥斯拉
# 官网Confirm： https://github.com/BeichenDream/Godzilla
echo -e "${Green} Confirm: https://github.com/BeichenDream/Godzilla Default Version: v3.03-godzilla ${Font}"
read -p "Input New Godzilla DownLoad Url:" Godzilla
Godzilla=${Godzilla:-"https://github.com/BeichenDream/Godzilla/releases/download/v3.03-godzilla/Godzilla.jar"}
cd ~ && mkdir Godzilla && cd Godzilla && wget "${Godzilla}" -O Godzilla.jar
echo '#!/bin/bash' >run_God && echo 'cd ~/Godzilla/ && ~/jdk1.8.0_261/bin/java -jar Godzilla.jar' >>run_God;chmod 755 run_God
sudo ln -sf `pwd`/run_God /usr/local/bin/run_God

# TorghostNG
#cd ~;git clone https://github.com/githacktools/TorghostNG && cd TorghostNG && sudo python3 install.py && sudo torghostng

# proxychains
sudo apt install proxychains -y
sed -i 's/socks4  127.0.0.1 9050/socks5  127.0.0.1 9050/g'  /etc/proxychains.conf 

# weevely3
mkdir -p ~/w/ && cd ~/w/;git clone https://github.com/epinna/weevely3.git;sudo apt install -y python3 python3-pip curl && cd ~/w/weevely3 &&pip3 install -r requirements.txt --upgrade;pip3 install mako;pip3 install prettytable;pip3 install -U requests[socks];pip3 install python-dateutil;sudo ln -s ~/w/weevely3/weevely.py /usr/local/bin/weevely

# pengTestTools
sudo mkdir -p /pengTestTools/;group=`id -g`;sudo chown $group:$group /pengTestTools/;sudo chmod 777 /pengTestTools/;
ln -s /pengTestTools/ $HOME/pengTestTools

#navicat
# google-chrome --incognito "https://download.navicat.com.cn/download/navicat15-mysql-cs.AppImage" --proxy-server="socks5://127.0.0.1:9050"
google-chrome --incognito "https://download.navicat.com.cn/download/navicat15-mysql-cs.AppImage"
sleep 60;
[ -f "Downloads/navicat15-mysql-cs.AppImage" ] && cd ~;mv Downloads/navicat15-mysql-cs.AppImage /pengTestTools && chmod 755 /pengTestTools/navicat15-mysql-cs.AppImage && proxychains /pengTestTools/navicat15-mysql-cs.AppImage
# https://download.navicat.com.cn/download/navicat15-mysql-cs.AppImage
echo -e "${Green} Open the download with Chrome Browser https://download.navicat.com.cn/download/navicat15-mysql-cs.AppImage ${Font}"

#chmod 755 /pengTestTools/navicat15-mysql-cs.AppImage
echo -e "\n\n"
echo -e "${Green} cd ~;mv Downloads/navicat15-mysql-cs.AppImage /pengTestTools && chmod 755 /pengTestTools/navicat15-mysql-cs.AppImage ${Font}"
echo -e "\n\n"
#run navicat：
echo -e "${Green} proxychains /pengTestTools/navicat15-mysql-cs.AppImage ${Font}"
echo -e "\n\n"
echo -e "${Green} Navicat expired processing: rm -rf ~/.config/navicat ~/.config/dconf/user ${Font}"
#rm -rf ~/.config/navicat ~/.config/dconf/user

